# **HealthyBois: Heart Rate Sensor** 

The purpose of this project is to build a heart rate sensor embedded system that connects to, and communicates with, a computer via I2C communication. The user first places their finger on the sensor. The sensor then sends the heart rate sample to the STM Discovery board via I2C communication. The computer then reads the heart rate data and, through the use of a timer, displays it on a terminal every two seconds using a UART cable and driver code. The computer also sends a signal to an LED on the STM Discovery board to blink at the same rate as the current measured heart rate. 

### **Wiring Instructions and Diagram**
// Michael - Basic instructions on how to wire everything

### **Heart Rate Sensor Embedded System**
The heart rate sensor itself is a MAX30101 chip. The chip is designed for use as a high-sensitivity pulse oximeter and heart rate sensor and the datasheet can be found [here](https://www.mouser.com/datasheet/2/256/MAX30101-953565.pdf). We designed a PCB around this chip that is fairly simple, as can be seen below. The SCL, SDA, and INT lines of the chip are connected to pull-up resistors (for a reason I can't remember right now...). The LEDs for the sensor require a 5V source which is connected with capacitors in order to minimize noise. The VDD for the chip needs a 1.8V which is also connected with capacitors to minimize noise. 

![HeartRateSensorSchematic](https://user-images.githubusercontent.com/42393799/116840731-3c4b2800-ab94-11eb-90b4-3cf1dd2ed1d2.png)

### **Driver Code**
The code for this project is split into multiple functions. There are functions to initialize the clocks for each of the peripherals, the LEDs used on the STM Discovery board, the UART peripheral, the I2C communication with the sensor, and the heart rate chip. There are also functions to set up the interrupt that is triggered when the heart rate sensor reads a heart rate sample, to set up the timers used to send the signal to the LED on the STM Discovery and to send the heart rate to the terminal, and interrupt handlers for the timers and the interrupt generated by the heart rate sensor. There are also various helper functions used in the I2C communication.
